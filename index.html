<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Reservation System</title>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-PMGDX3G');</script>
  <!-- End Google Tag Manager -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-130591868-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-130591868-1');
</script>


        
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.css" rel="stylesheet" type="text/css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.js"></script>
</head>
<style>
  
  body {
  font-family: cursive;
  background: #f4f4f4;
  font-size: 17px;
  line-height: 1.6;
  display: flex;
  height: 100vh;
  align-items: center;
  justify-content: center;
}

.formWrapper {
  /* position: fixed;  */
  left: 0;
  bottom: 0;
  width: 100%;
  background-color: white;
  border: rgb(236, 234, 234) 1px solid;
  border-radius: 5px;
  padding: 10px 5px;
  margin: auto;
  -webkit-box-shadow: 0 10px 6px -6px #777;
  -moz-box-shadow: 0 10px 6px -6px #777;
    box-shadow: 0 10px 6px -6px #777;
}
#reservationForm {
  position: relative;  
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
} 
 

.input-box-item {  
    position: relative;
    font-family: monospace !important; 
    height: 40px; 
    width: 100%;
    margin: 0 auto;
    padding: 5px;
}

input::-webkit-inner-spin-button{
    opacity:1;
    height: 50px;
  } 

.input-box-item input[type="text"] { 
  border: 1px solid rgb(216, 214, 214);
  border-radius: 2px; 
  height: 100%; 
  width: 100%;
  padding: 0;
  color: grey;
}
.input-box-item input[type="number"] { 
  border: 1px solid rgb(216, 214, 214);
  border-radius: 2px; 
  height: 100%; 
  width: 100%;
  padding: 0;
  -moz-appearance: textfield;
}
.input-box-item input[type="number"]::placeholder{
  padding-left: 4px;
  color: grey;
} 
 

/* @media only screen and (max-width: 600px) {
  .input-box-item {
    width: 300px;
  }
  .input-box-item i {
    position: absolute;  
    top: 20px;
    left: 220px !important;  
}
}  */

.input-box-item i {
    position: absolute;  
    top: 20px;
    left: 270px;  
}

.input-box-item button {
  width: 100%;
  border-radius: 3px; 
  transition: all 0.4s;
  box-shadow: 0 10px 8px -8px #777;
}
.input-box-item button:hover { 
  box-shadow: 0 7px 3px -5px #777;
  transition: all 0.4s;
}
 
#searchbtn {
  position: relative; 
  background: #2eb0d1; 
  color: #FFF; 
  border: none;    
  height: 100%;
}

#searchbtn:hover {
    background: #2ba1be;
} 

.button-wrapper {
    text-align: center;
}
 

.button {
  position: absolute;
  bottom:1%;
  left: 50%;
  background: #2eb0d1;
  padding: 1em 1em;
  margin-left: -60px;
  color: #fff;
  border: 0;
  border-radius: 5px;
  cursor: pointer;
}

.button:hover {
  background: #2ec2e7;
}

.modal {
  display: none;
  position: fixed;
  z-index: 1;
  left: 0;
  top: 0;
  height: 100%;
  width: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.5);
}

.modal-content {
  margin: 10% auto;
  width: 340px;
  box-shadow: 0 5px 8px 0 rgba(0, 0, 0, 0.2), 0 7px 20px 0 rgba(0, 0, 0, 0.17);
  animation-name: modalopen;
  animation-duration: 0.5s;
}

.modal-header h2,
.modal-footer h3 {
  margin: 0;
}

.modal-header {
  background: #2eb0d1;
  text-align: center;
  padding: 15px;
  color: #fff;
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
}

.modal-body {
  padding: 10px 20px;
  background: #fff;
}

.modal-footer {
  background: #2eb0d1;
  padding: 3px;
  color: #fff;
  text-align: center;
  border-bottom-left-radius: 5px;
  border-bottom-right-radius: 5px;
}

.close {
  color: #ccc;
  float: right;
  font-size: 30px;
  color: #fff;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}

@keyframes modalopen {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

 
</style>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PMGDX3G"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
<body>
  <div class="button-wrapper">
      <button id="modal-btn" class="button">Check Availability</button>
  </div>
     

    <div id="my-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <span class="close">&times;</span>
          <h2>Check Availability</h2>
        </div>
        <div class="modal-body">
            <div class="formWrapper">
                <form id="reservationForm" autocomplete="off"> 
                    <div class="input-box-item" >
                      <input id="checkin" type="text" placeholder="Check in" data-date-format="mm-dd-yyyy" class="datepicker check-in" value="" required/><i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="input-box-item">
                      <input  id="checkout" type="text" placeholder="Check out" data-date-format="mm-dd-yyyy" class="datepicker check-out" value="" required/><i class="fas fa-calendar-alt"></i>
                    </div> 
                    <div class="input-box-item">
                      <input class="adults" type="number" name="adults" placeholder="Adults" required/>
                      </div>
                      <div class="input-box-item">
                        <input class="children" type="number" name="children" placeholder="Children ( 6 - 11 yrs )"/>
                      </div>
                      <div class="input-box-item"> 
                        <input class="infant" type="number" name="infant" placeholder="Infant ( 0 - 5 yrs )"/>
                      </div>
                      <div class="input-box-item"> 
                        <input class="room" type="number" name="room" placeholder="No. of Room Number" required/>
                      </div>
                      <div class="input-box-item"> 
                        <button id="searchbtn" type="submit" >Check Availability</button>
                      </div>
                </form>  
              </div>
        </div>
        <div class="modal-footer">
          <h3>Thanks for chosing us!</h3>
        </div>
      </div>
    </div>
     
 
     
    
</body>
<script>
    let search = document.querySelector('#searchbtn'); 
    let url = "https://bookings.rmscloud.com/obookings3/Rates/Index/11073/250?";
    let id = "_0AXVC9PKHZDZC2";
    let checkin = document.querySelector('.check-in');
    let checkout = document.querySelector('.check-out');
    let adultAmt = document.querySelector('.adults');
    let childrenAmt = document.querySelector('.children')
    let infantAmt = document.querySelector('.infant')
    let roomAmt = document.querySelector('.room');
    let inputs = document.querySelectorAll('#reservationForm input');
    
   
 

    search.addEventListener("click" , function(e){ 
      e.preventDefault();   
       
      if(!checkin.checkValidity()){
        alert("Please fill the check in date");
      } else if (!checkout.checkValidity()){
        console.log(checkout.validationMessage);
        alert("Please fill the check out date");
        
      } else if (!adultAmt.checkValidity()){
        alert("You must have at least one Adult");
      } else if (!roomAmt.checkValidity()){
        alert("You must pick a room number");
      } else if (checkout.value === checkin.value){
        alert("Your checkout cannot be the same day");
      } else {
        window.open(`${url}A=${checkin.value}&D=${checkout.value}&Dn=20181013154301&Rt=0&Ad=${adultAmt.value}&C=${childrenAmt.value}&I=${infantAmt.value}&An=${roomAmt.value}&Mp=0&M=0&Y=1&Z=0#!/rate`);
      }
         /* window.open( `${url}&bekey=${id}&checkin=${checkin.value.replace(/-/g, "")}&checkout=${checkout.value.replace(/-/g, "")}&adults=${adultAmt.value}&quantity=${roomAmt.value}`, '_blank'); */
    }); 


    $(document).ready(function(){
      $("#checkin").datepicker({ 
        autoclose: true, 
        startDate: '-1d',
        todayHighlight: true
  }).datepicker('update', new Date());
    $("#checkout").datepicker({  
          startDate: '-d'
    }).datepicker('update', new Date());
});
 

 fetch("get", `${url}A=${checkin.value}&D=${checkout.value}&Dn=20181013154301&Rt=0&Ad=${adultAmt.value}&C=${childrenAmt.value}&I=${infantAmt.value}&An=${roomAmt.value}&Mp=0&M=0&Y=1&Z=0#!/rate`)
 .then(info => info.json())
 .then(info => console.log(info));

 // Get DOM Elements
const modal = document.querySelector('#my-modal');
const modalBtn = document.querySelector('#modal-btn');
const closeBtn = document.querySelector('.close');

// Events
modalBtn.addEventListener('click', openModal);
closeBtn.addEventListener('click', closeModal);
window.addEventListener('click', outsideClick);

// Open
function openModal() {
  modal.style.display = 'block';
}

// Close
function closeModal() {
  modal.style.display = 'none';
}

// Close If Outside Click
function outsideClick(e) {
  if (e.target == modal) {
    modal.style.display = 'none';
  }
}

</script>
 </html>